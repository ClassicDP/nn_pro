# Сравнение качества обнаружения на разных разрешениях

## Методология тестирования

- **Количество изображений**: 27 (рандомный выбор из 30)
- **Конфиденс порог**: 0.25
- **Без предварительного ресайза**: модель сама оптимизирует ресайз
- **Тестируемые разрешения**: 192x192, 256x256, 320x320

## Результаты по разрешениям

### 192x192 (самое быстрое)

| Метрика | Значение |
|---------|----------|
| **Среднее время** | **30.5 ms** |
| **Минимум** | 17.7 ms |
| **Максимум** | 187.1 ms |
| **Теоретический FPS** | **32.8** |
| **Найдено авто** | **23/27 (85.2%)** |
| **Не найдено** | 4/27 (14.8%) |
| **Всего детекций** | 86 |
| **Детекций на изображение** | 3.2 |
| **Средняя уверенность** | 0.41 |

**Вывод**: Оптимально для первого этапа каскада - максимальная скорость при приемлемом качестве.

### 256x256 (средний вариант)

| Метрика | Значение |
|---------|----------|
| **Среднее время** | 41.3 ms |
| **Минимум** | 30.8 ms |
| **Максимум** | 150.1 ms |
| **Теоретический FPS** | 24.2 |
| **Найдено авто** | 23/27 (85.2%) |
| **Не найдено** | 4/27 (14.8%) |
| **Всего детекций** | 103 |
| **Детекций на изображение** | 3.8 |
| **Средняя уверенность** | 0.41 |

**Вывод**: Компромисс между скоростью и качеством. Находит больше детекций, чем 192x192.

### 320x320 (лучшее качество)

| Метрика | Значение |
|---------|----------|
| **Среднее время** | 73.7 ms |
| **Минимум** | 53.9 ms |
| **Максимум** | 190.7 ms |
| **Теоретический FPS** | 13.6 |
| **Найдено авто** | **25/27 (92.6%)** |
| **Не найдено** | 2/27 (7.4%) |
| **Всего детекций** | 152 |
| **Детекций на изображение** | 5.6 |
| **Средняя уверенность** | 0.38 |

**Вывод**: Лучшее качество обнаружения, но медленнее. Оптимально для второго этапа каскада на ROI.

## Сравнительная таблица

| Разрешение | Время (ms) | FPS  | Найдено % | Детекций/изобр | Уверенность |
|------------|------------|------|-----------|----------------|-------------|
| **192x192** | **30.5**   | **32.8** | 85.2%     | 3.2           | 0.41        |
| **256x256** | 41.3       | 24.2     | 85.2%     | 3.8           | 0.41        |
| **320x320** | 73.7       | 13.6     | **92.6%** | **5.6**       | 0.38        |

## Анализ качества

### Процент обнаружения

- **192x192**: 85.2% (23/27) - пропущено 4 изображения
- **256x256**: 85.2% (23/27) - пропущено 4 изображения  
- **320x320**: 92.6% (25/27) - пропущено только 2 изображения

**Вывод**: 320x320 находит на 7.4% больше изображений с авто.

### Количество детекций на изображение

- **192x192**: 3.2 детекции
- **256x256**: 3.8 детекции (+18%)
- **320x320**: 5.6 детекций (+75% от 192x192)

**Вывод**: С увеличением разрешения модель находит больше объектов на изображении.

### Уверенность детекций

- **192x192**: 0.41
- **256x256**: 0.41
- **320x320**: 0.38

**Вывод**: Уверенность примерно одинаковая, но 320x320 находит больше слабых детекций (ниже средняя уверенность, но больше общее количество).

## Рекомендации для каскадного подхода

### Этап 1: Детекция автомобилей
- **Разрешение**: **192x192**
- **Время**: ~30ms
- **Качество**: 85.2% обнаружения
- **Обоснование**: Максимальная скорость для быстрого сканирования всего кадра

### Этап 2: Детекция номеров на ROI
- **Разрешение**: **320x320**
- **Время**: ~74ms (но на меньшей области ROI)
- **Качество**: 92.6% обнаружения
- **Обоснование**: Лучшее качество для точной детекции на увеличенной области

### Этап 3: Распознавание символов
- **Разрешение**: 200-300px (зависит от модели)
- **Время**: ~20-30ms
- **Обоснование**: Работа на маленькой области номера

## Общее время каскада (оценка)

1. **Этап 1 (авто, 192x192)**: ~30ms
2. **Этап 2 (номер, 320x320 на ROI)**: ~20-40ms (меньше области)
3. **Этап 3 (символы)**: ~20-30ms

**Итого: ~70-100ms** - приемлемо для реального времени!

## Выводы

1. **192x192** - оптимально для первого этапа (скорость + приемлемое качество)
2. **320x320** - лучшее качество для второго этапа (на ROI)
3. **Качество растет с разрешением**: 85.2% → 92.6%
4. **Количество детекций растет**: 3.2 → 5.6 на изображение
5. **Каскадный подход работает**: общее время <100ms возможно

## Файлы результатов

- Мозаики сравнения сохранены в: `output_quality_comparison/`
- Каждое изображение содержит результаты для всех трех разрешений рядом



